var e=Object.defineProperty,t=Object.defineProperties,r=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,o=(t,r,n)=>r in t?e(t,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[r]=n,u=(e,t)=>{for(var r in t||(t={}))a.call(t,r)&&o(e,r,t[r]);if(n)for(var r of n(t))l.call(t,r)&&o(e,r,t[r]);return e},i=(e,n)=>t(e,r(n));import{a as s,b as c,bN as d,p as m,r as p,dh as h,bR as v,dy as f,d8 as b,bE as y,am as g,dj as C,du as O,dg as j,eY as k,e as x,o as I,f as w,k as P,j as B,i as R,bV as M,m as S,l as $,bU as A,bI as E}from"./index.js";import{B as D}from"./index14.js";const _=c({name:"LayoutBreadcrumb",components:{Icon:d,[D.name]:D},props:{theme:m.oneOf(["dark","light"])},setup(){const e=p([]),{currentRoute:t}=h(),{prefixCls:r}=v("layout-breadcrumb"),{getShowBreadCrumbIcon:n}=f(),a=b(),{t:l}=y();function o(e,t){const r=[];return e.forEach((e=>{var n,a;t.includes(e.path)&&r.push(i(u({},e),{name:(null==(n=e.meta)?void 0:n.title)||e.name})),(null==(a=e.children)?void 0:a.length)&&r.push(...o(e.children,t))})),r}return g((()=>{return r=this,n=null,a=function*(){var r,n,a;if(t.value.name===C)return;const l=yield O(),s=t.value.matched,c=null==s?void 0:s[s.length-1];let d=t.value.path;c&&(null==(r=null==c?void 0:c.meta)?void 0:r.currentActiveMenu)&&(d=c.meta.currentActiveMenu);const m=j(l,d),p=o(l.filter((e=>e.path===m[0])),m);if(!p||0===p.length)return;const h=k(p,(e=>{const{meta:t,name:r}=e;if(!t)return!!r;const{title:n,hideBreadcrumb:a,hideMenu:l}=t;return!(!n||a||l)})).filter((e=>{var t;return!(null==(t=e.meta)?void 0:t.hideBreadcrumb)}));(null==(n=t.value.meta)?void 0:n.currentActiveMenu)&&h.push(i(u({},t.value),{name:(null==(a=t.value.meta)?void 0:a.title)||t.value.name})),e.value=h},new Promise(((e,t)=>{var l=e=>{try{u(a.next(e))}catch(r){t(r)}},o=e=>{try{u(a.throw(e))}catch(r){t(r)}},u=t=>t.done?e(t.value):Promise.resolve(t.value).then(l,o);u((a=a.apply(r,n)).next())}));var r,n,a})),{routes:e,t:l,prefixCls:r,getIcon:function(e){var t;return e.icon||(null==(t=e.meta)?void 0:t.icon)},getShowBreadCrumbIcon:n,handleClick:function(e,t,r){null==r||r.preventDefault();const{children:n,redirect:l,meta:o}=e;if(!(null==n?void 0:n.length)||l){if(!(null==o?void 0:o.carryParam))if(l&&E(l))a(l);else{let e="";if(1===t.length)e=t[0];else{e=`${t.slice(1).pop()||""}`}e=/^\//.test(e)?e:`/${e}`,a(e)}}else null==r||r.stopPropagation()},hasRedirect:function(e,t){return e.indexOf(t)!==e.length-1}}}}),L={key:1};var N=s(_,[["render",function(e,t,r,n,a,l){const o=x("Icon"),u=x("router-link"),i=x("a-breadcrumb");return I(),w("div",{class:A([e.prefixCls,`${e.prefixCls}--${e.theme}`])},[P(i,{routes:e.routes},{itemRender:B((({route:t,routes:r,paths:n})=>[e.getShowBreadCrumbIcon&&e.getIcon(t)?(I(),R(o,{key:0,icon:e.getIcon(t)},null,8,["icon"])):M("",!0),e.hasRedirect(r,t)?(I(),R(u,{key:2,to:"",onClick:r=>e.handleClick(t,n,r)},{default:B((()=>[$(S(e.t(t.name||t.meta.title)),1)])),_:2},1032,["onClick"])):(I(),w("span",L,S(e.t(t.name||t.meta.title)),1))])),_:1},8,["routes"])],2)}]]);export{N as default};
