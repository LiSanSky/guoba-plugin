var e=Object.defineProperty,t=Object.defineProperties,n=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,r=(t,n,a)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[n]=a,s=(e,t)=>{for(var n in t||(t={}))o.call(t,n)&&r(e,n,t[n]);if(a)for(var n of a(t))l.call(t,n)&&r(e,n,t[n]);return e},u=(e,a)=>t(e,n(a));import{a as i,b as p,p as f,r as c,c as d,w as b,t as m,e as y,o as g,f as h,F as v,h as w,i as O,j as C,k as j,n as k,l as P,m as V,q as F,u as I}from"./index.js";const x=p({name:"GTags",inheritAttrs:!1,props:{value:f.array.def((()=>[])),allowAdd:f.bool.def(!1),allowDel:f.bool.def(!1),showPrompt:f.bool.def(!1),promptProps:f.object.def((()=>({}))),valueFormatter:f.oneOfType([f.func,f.string])},emits:["change"],setup(e,{emit:t}){const{createPrompt:n}=I(),a=c(),o=d({tags:[],inputVisible:!1,inputValue:""});function l(){const e=o.inputValue;let t=o.tags;e&&-1===t.indexOf(e)&&(t=[...t,r(e)]),Object.assign(o,{tags:t,inputVisible:!1,inputValue:""}),i()}function r(t){if(e.valueFormatter){if("function"!=typeof e.valueFormatter)return new Function(`return ${e.valueFormatter}`)()(t);e.valueFormatter(t)}return t}function i(){t("change",o.tags)}return b((()=>e.value),(e=>{o.tags=null==e?[]:e}),{immediate:!0}),u(s({},m(o)),{handleClose:function(e){o.tags=o.tags.filter((t=>t!==e)),i()},showInput:function(){e.showPrompt?n(u(s({title:"添加",required:!0},e.promptProps),{onOk(e){o.inputValue=e,l()}})):(o.inputVisible=!0,k((()=>{a.value.focus()})))},handleInputConfirm:l,inputRef:a})}}),_=V(" 新增 ");var q=i(x,[["render",function(e,t,n,a,o,l){const r=y("a-tag"),s=y("a-tooltip"),u=y("a-input"),i=y("icon");return g(),h(v,null,[(g(!0),h(v,null,w(e.tags,(t=>(g(),h(v,{key:t},[t.length>20?(g(),O(s,{key:0,title:t},{default:j((()=>[P(r,{closable:"",onClose:n=>e.handleClose(t)},{default:j((()=>[V(F(`${t.slice(0,20)}...`),1)])),_:2},1032,["onClose"])])),_:2},1032,["title"])):(g(),O(r,{key:1,closable:"",onClose:n=>e.handleClose(t)},{default:j((()=>[V(F(t),1)])),_:2},1032,["onClose"]))],64)))),128)),e.inputVisible?(g(),O(u,{key:0,ref:"inputRef",value:e.inputValue,"onUpdate:value":t[0]||(t[0]=t=>e.inputValue=t),type:"text",size:"small",style:{width:"78px"},onBlur:e.handleInputConfirm,onKeyup:C(e.handleInputConfirm,["enter"])},null,8,["value","onBlur","onKeyup"])):(g(),O(r,{key:1,style:{background:"#fff","border-style":"dashed",cursor:"pointer"},onClick:e.showInput},{default:j((()=>[P(i,{icon:"ant-design:plus"}),_])),_:1},8,["onClick"]))],64)}]]);export{q as default};
