import{a as e,b as l,r as a,e as t,o as i,f as s,z as n,k as o,j as c,ca as d,x as r,bP as u,m as p,F as v,h as m,bT as g,bg as h,M as b,d$ as f,l as y,cU as L,cV as B,bV as k}from"./index.js";import C from"./EditBodyModal.js";import{c as x}from"./miao.api.js";import"./index6.js";import"./SelectIconModal.js";import"./IconUploader.js";const j=e=>(L("data-v-154a4b10"),e=e(),B(),e),D={class:"change-background"},U=j((()=>n("input",{type:"file",id:"upload-bg",style:{display:"none"},name:"icon",accept:"image/bmp,image/jpeg,image/png"},null,-1))),I=j((()=>n("input",{type:"file",id:"upload-icon",style:{display:"none"},name:"icon",accept:"image/png"},null,-1))),_={class:"title"},w={class:"label"},M=["onClick"],$={class:"help-table"},P=["onClick"],z={class:"help-title"},O={class:"help-desc"},T={class:"copyright"},E=y(" Created By Yunzai-Bot "),S={class:"version"},A=y(" & Miao-Plugin "),F={class:"version"},R={class:"p-4"},V={class:"row"},W=j((()=>n("div",null,"主标题",-1))),H={class:"flex-1"},Y={class:"row"},q=j((()=>n("div",null,"附标题",-1))),G={class:"flex-1"};var J=e(l({__name:"HelpPanel",props:{helpCfg:Object,helpList:Object,bgB64:String,mainB64:String,iconB64List:Array,modelData:Object,versions:Object},emits:["update:modelData","update:mainB64","update:iconB64List"],setup(e,{emit:l}){const{createMessage:y}=k(),L=a(!1),B=a([{event:"changeBackground",text:"更换背景",icon:"akar-icons:image",onClick(){J("upload-bg",(e=>{l("update:mainB64",e)}))}},{event:"uploadIcon",text:"上传图标",icon:"fontisto:nav-icon-grid",onClick(){J("upload-icon",(e=>{return a=this,t=null,i=function*(){let a=yield x(e);l("update:iconB64List",a),y.success("上传成功")},new Promise(((e,l)=>{var s=e=>{try{o(i.next(e))}catch(a){l(a)}},n=e=>{try{o(i.throw(e))}catch(a){l(a)}},o=l=>l.done?e(l.value):Promise.resolve(l.value).then(s,n);o((i=i.apply(a,t)).next())}));var a,t,i}))}}]),j={};function J(e,l){let a=document.getElementById(e);j[e]||(j[e]=!0,a.addEventListener("change",(e=>{let t=e.target.files;if(0!==t.length){let e=t[0],i=new FileReader;i.readAsDataURL(e),i.onload=()=>{l(i.result),a.value=null}}}))),a.click()}const K=()=>{L.value=!0},N=(e,a,t,i)=>{l("update:modelData",{show:!0,cell:e,cellIndex:a,group:t,groupIndex:i})},Q=e=>{let l=[];for(let a=0;a<e.length;a+=3)l.push(e.slice(a,a+3));return l},X=()=>document.body.clientWidth>850?1:document.body.clientWidth/850;return(l,a)=>{const y=t("Icon"),k=t("a-button"),x=t("a-input");return i(),s("div",{style:d(`transform: scale(${X()});transform-origin: center top;`)},[n("div",{class:"wrap",style:d({background:`url(${e.mainB64}) top left/100% auto no-repeat,url(${e.bgB64})`})},[n("div",D,[U,I,o(r(u),{trigger:["click"],dropMenuList:B.value},{default:c((()=>[o(k,{style:d(`transform: scale(${1/X()});transform-origin: right top;`),type:"primary",shape:"circle",size:"large"},{default:c((()=>[o(y,{icon:"akar-icons:image"})])),_:1},8,["style"])])),_:1},8,["dropMenuList"])]),n("div",{class:"head-box",onClick:K},[n("div",_,p(e.helpCfg.title),1),n("div",w,p(e.helpCfg.subTitle),1)]),(i(!0),s(v,null,m(e.helpList,((l,a)=>(i(),s("div",{class:"cont-box",key:a},[n("div",{class:"help-group",onClick:e=>N(null,null,l,a)},p(l.group),9,M),n("div",$,[(i(!0),s(v,null,m(Q(l.list),((t,r)=>(i(),s("div",{class:"tr",key:r},[(i(!0),s(v,null,m(t,((t,u)=>(i(),s("div",{class:g(["td",t===e.modelData.cell?"active":"inactive"]),key:u,onClick:e=>N(t,3*r+u,l,a)},[o(h,{name:"fade-transition"},{default:c((()=>[n("div",null,[n("div",{class:"help-icon",style:d(`background: url(${e.iconB64List[t.icon]}) 0 0 no-repeat`)},null,4),n("div",z,p(t.title),1),n("div",O,p(t.desc),1)])])),_:2},1024)],10,P)))),128))])))),128))])])))),128)),n("div",T,[E,n("span",S,p(e.versions.yunzai),1),A,n("span",F,p(e.versions.miao),1)])],4),o(r(b),{visible:L.value,"onUpdate:visible":a[2]||(a[2]=e=>L.value=e),title:"编辑标题",closable:!1,footer:null},{default:c((()=>[n("div",R,[n("div",V,[W,n("div",H,[o(x,{value:e.helpCfg.title,"onUpdate:value":a[0]||(a[0]=l=>e.helpCfg.title=l),placeholder:"主标题"},null,8,["value"])])]),n("div",Y,[q,n("div",G,[o(x,{value:e.helpCfg.subTitle,"onUpdate:value":a[1]||(a[1]=l=>e.helpCfg.subTitle=l),placeholder:"附标题"},null,8,["value"])])])])])),_:1},8,["visible"]),o(C,{helpList:e.helpList,"onUpdate:helpList":a[3]||(a[3]=e=>f(helpList)?helpList.value=e:null),modelData:e.modelData,"onUpdate:modelData":a[4]||(a[4]=e=>f(modelData)?modelData.value=e:null),iconB64List:e.iconB64List,"onUpdate:iconB64List":a[5]||(a[5]=e=>f(iconB64List)?iconB64List.value=e:null)},null,8,["helpList","modelData","iconB64List"])],4)}}}),[["__scopeId","data-v-154a4b10"]]);export{J as default};
