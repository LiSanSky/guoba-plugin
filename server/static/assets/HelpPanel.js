import{a as e,b as l,r as a,e as t,o as i,f as s,z as n,k as o,j as c,cb as d,x as r,bQ as u,m as p,F as v,h as m,bU as g,bf as h,bV as f,M as b,e1 as y,l as L,cV as B,cW as k,bW as C}from"./index.js";import x from"./EditBodyModal.js";import{c as j}from"./miao.api.js";import"./index5.js";import"./SelectIconModal.js";import"./IconUploader.js";const D=e=>(B("data-v-8f5111a6"),e=e(),k(),e),U={class:"change-background"},I=D((()=>n("input",{type:"file",id:"upload-bg",style:{display:"none"},name:"icon",accept:"image/bmp,image/jpeg,image/png"},null,-1))),_=D((()=>n("input",{type:"file",id:"upload-icon",style:{display:"none"},name:"icon",accept:"image/png"},null,-1))),w={class:"title"},M={class:"label"},$=["onClick"],z={key:0,class:"help-table"},O=["onClick"],P={class:"help-title"},W={class:"help-desc"},E={class:"copyright"},S=L(" Created By Yunzai-Bot "),T={class:"version"},A=L(" & Miao-Plugin "),F={class:"version"},R={class:"p-4"},V={class:"row"},H=D((()=>n("div",null,"主标题",-1))),Q={class:"flex-1"},Y={class:"row"},q=D((()=>n("div",null,"附标题",-1))),G={class:"flex-1"};var J=e(l({__name:"HelpPanel",props:{helpCfg:Object,helpList:Object,bgB64:String,mainB64:String,iconB64List:Array,modelData:Object,versions:Object},emits:["update:modelData","update:mainB64","update:iconB64List"],setup(e,{emit:l}){const{createMessage:L}=C(),B=a(!1),k=a([{event:"changeBackground",text:"更换背景",icon:"akar-icons:image",onClick(){J("upload-bg",(e=>{l("update:mainB64",e)}))}},{event:"uploadIcon",text:"上传图标",icon:"fontisto:nav-icon-grid",onClick(){J("upload-icon",(e=>{return a=this,t=null,i=function*(){let a=yield j(e);l("update:iconB64List",a),L.success("上传成功")},new Promise(((e,l)=>{var s=e=>{try{o(i.next(e))}catch(a){l(a)}},n=e=>{try{o(i.throw(e))}catch(a){l(a)}},o=l=>l.done?e(l.value):Promise.resolve(l.value).then(s,n);o((i=i.apply(a,t)).next())}));var a,t,i}))}}]),D={};function J(e,l){let a=document.getElementById(e);D[e]||(D[e]=!0,a.addEventListener("change",(e=>{let t=e.target.files;if(0!==t.length){let e=t[0],i=new FileReader;i.readAsDataURL(e),i.onload=()=>{l(i.result),a.value=null}}}))),a.click()}const K=()=>{B.value=!0},N=(e,a,t,i)=>{l("update:modelData",{show:!0,cell:e,cellIndex:a,group:t,groupIndex:i})},X=e=>{let l=[];for(let a=0;a<e.length;a+=3)l.push(e.slice(a,a+3));return l},Z=()=>document.body.clientWidth>850?1:document.body.clientWidth/850;return(l,a)=>{const L=t("Icon"),C=t("a-button"),j=t("a-input");return i(),s("div",{style:d(`transform: scale(${Z()});transform-origin: center top;`)},[n("div",{class:"wrap",style:d({background:`url(${e.mainB64}) top left/100% auto no-repeat,url(${e.bgB64})`})},[n("div",U,[I,_,o(r(u),{trigger:["click"],dropMenuList:k.value},{default:c((()=>[o(C,{style:d(`transform: scale(${1/Z()});transform-origin: right top;`),type:"primary",shape:"circle",size:"large"},{default:c((()=>[o(L,{icon:"akar-icons:image"})])),_:1},8,["style"])])),_:1},8,["dropMenuList"])]),n("div",{class:"head-box",onClick:K},[n("div",w,p(e.helpCfg.title),1),n("div",M,p(e.helpCfg.subTitle),1)]),(i(!0),s(v,null,m(e.helpList,((l,a)=>(i(),s("div",{class:"cont-box",key:a},[n("div",{class:"help-group",onClick:e=>N(null,null,l,a)},p(l.group),9,$),l.list&&l.list.length>0?(i(),s("div",z,[(i(!0),s(v,null,m(X(l.list),((t,r)=>(i(),s("div",{class:"tr",key:r},[(i(!0),s(v,null,m(t,((t,u)=>(i(),s("div",{class:g(["td",t===e.modelData.cell?"active":"inactive"]),key:u,onClick:e=>N(t,3*r+u,l,a)},[o(h,{name:"fade-transition"},{default:c((()=>[n("div",null,[n("div",{class:"help-icon",style:d(`background: url(${e.iconB64List[t.icon]}) 0 0 no-repeat`)},null,4),n("div",P,p(t.title),1),n("div",W,p(t.desc),1)])])),_:2},1024)],10,O)))),128))])))),128))])):f("",!0)])))),128)),n("div",E,[S,n("span",T,p(e.versions.yunzai),1),A,n("span",F,p(e.versions.miao),1)])],4),o(r(b),{visible:B.value,"onUpdate:visible":a[2]||(a[2]=e=>B.value=e),title:"编辑标题",closable:!1,footer:null},{default:c((()=>[n("div",R,[n("div",V,[H,n("div",Q,[o(j,{value:e.helpCfg.title,"onUpdate:value":a[0]||(a[0]=l=>e.helpCfg.title=l),placeholder:"主标题"},null,8,["value"])])]),n("div",Y,[q,n("div",G,[o(j,{value:e.helpCfg.subTitle,"onUpdate:value":a[1]||(a[1]=l=>e.helpCfg.subTitle=l),placeholder:"附标题"},null,8,["value"])])])])])),_:1},8,["visible"]),o(x,{helpList:e.helpList,"onUpdate:helpList":a[3]||(a[3]=e=>y(helpList)?helpList.value=e:null),modelData:e.modelData,"onUpdate:modelData":a[4]||(a[4]=e=>y(modelData)?modelData.value=e:null),iconB64List:e.iconB64List,"onUpdate:iconB64List":a[5]||(a[5]=e=>y(iconB64List)?iconB64List.value=e:null)},null,8,["helpList","modelData","iconB64List"])],4)}}}),[["__scopeId","data-v-8f5111a6"]]);export{J as default};
