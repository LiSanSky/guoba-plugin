import{a as e,b as l,ej as a,b4 as t,E as i,r as s,R as n,e as o,o as c,f as d,D as r,l as p,k as u,a2 as v,H as m,bz as g,q as h,F as f,h as b,x as y,bp as k,z as L,fV as B,c3 as C,A as j,C as x,m as D,e9 as $}from"./index.js";import I from"./EditBodyModal2.js";import{a as U}from"./miao.api.js";import M from"./UploadIconHelpModal2.js";import"./SelectIconModal2.js";import"./IconUploader2.js";import"./esm.js";import"./base64Conver.js";import"./21ae6624.js";const w=e=>(j("data-v-736b29d8"),e=e(),x(),e),_={class:"change-background"},z=w((()=>r("input",{type:"file",id:"upload-bg",style:{display:"none"},name:"icon",accept:"image/bmp,image/jpeg,image/png"},null,-1))),R=w((()=>r("input",{type:"file",id:"upload-icon",style:{display:"none"},name:"icon",accept:"image/png"},null,-1))),E={class:"title"},O={class:"label"},T=["onClick"],A={key:0,class:"help-table"},P=["onClick"],S={class:"help-title"},V={class:"help-desc"},F={class:"copyright"},H=D(" Created By Yunzai-Bot "),W={class:"version"},q=D(" & Miao-Plugin "),N={class:"version"},Y={class:"p-4"},G={class:"row"},J=w((()=>r("div",null,"主标题",-1))),K={class:"flex-1"},Q={class:"row"},X=w((()=>r("div",null,"副标题",-1))),Z={class:"flex-1"};var ee=e(l({props:{helpCfg:Object,helpList:Object,bgB64:String,mainB64:String,cacheVer:Number,iconB64List:Array,modelData:Object,versions:Object},emits:["update:modelData","update:mainB64","update:iconB64List"],setup(e,{emit:l}){const j=e,x=a(),D=t(),[w,ee]=i(),{createMessage:le}=$(),ae=s(!1),te=s([{event:"changeBackground",text:"更换背景",icon:"akar-icons:image",onClick(){ne("upload-bg",(e=>{l("update:mainB64",e)}))}},{event:"uploadIcon",text:"上传图标",icon:"fontisto:nav-icon-grid",onClick(){let e=()=>{ne("upload-icon",(e=>{return a=this,t=null,i=function*(){let a=yield U(e);l("update:iconB64List",a),le.success("上传成功")},new Promise(((e,l)=>{var s=e=>{try{o(i.next(e))}catch(a){l(a)}},n=e=>{try{o(i.throw(e))}catch(a){l(a)}},o=l=>l.done?e(l.value):Promise.resolve(l.value).then(s,n);o((i=i.apply(a,t)).next())}));var a,t,i}))};!0===x.get("hide-upload-icon-help-modal",!1)?e():ee.openModal(!0,e)}}]),ie={},se=n((()=>{let e={},l=`/api/plugin/miao/help/theme/$s?token=${D.liteToken}&_v=${j.cacheVer}`,a=l.replace("$s","bg"),t=l.replace("$s","main");return j.mainB64&&(t=j.mainB64),e.background=`url(${t}) top left/100% auto no-repeat,url(${a})`,e}));function ne(e,l){let a=document.getElementById(e);ie[e]||(ie[e]=!0,a.addEventListener("change",(e=>{let t=e.target.files;if(0!==t.length){let e=t[0],i=new FileReader;i.readAsDataURL(e),i.onload=()=>{l(i.result),a.value=null}}}))),a.click()}const oe=()=>{ae.value=!0},ce=(e,a,t,i)=>{l("update:modelData",{show:!0,cell:e,cellIndex:a,group:t,groupIndex:i})},de=e=>{let l=[];for(let a=0;a<e.length;a+=3)l.push(e.slice(a,a+3));return l},re=n((()=>document.body.clientWidth>850?1:document.body.clientWidth/850));return(l,a)=>{const t=o("Icon"),i=o("a-button"),s=o("a-input");return c(),d("div",{style:v(`transform: scale(${m(re)});transform-origin: center top;`)},[r("div",{class:"wrap",style:v(m(se))},[r("div",_,[z,R,p(m(g),{trigger:["click"],dropMenuList:te.value},{default:u((()=>[p(i,{style:v(`transform: scale(${1/m(re)});transform-origin: right top;`),type:"primary",shape:"circle",size:"large"},{default:u((()=>[p(t,{icon:"akar-icons:image"})])),_:1},8,["style"])])),_:1},8,["dropMenuList"])]),r("div",{class:"head-box",onClick:oe},[r("div",E,h(e.helpCfg.title),1),r("div",O,h(e.helpCfg.subTitle),1)]),(c(!0),d(f,null,b(e.helpList,((l,a)=>(c(),d("div",{class:"cont-box",key:a},[r("div",{class:"help-group",onClick:e=>ce(null,null,l,a)},h(l.group),9,T),l.list&&l.list.length>0?(c(),d("div",A,[(c(!0),d(f,null,b(de(l.list),((t,i)=>(c(),d("div",{class:"tr",key:i},[(c(!0),d(f,null,b(t,((t,s)=>(c(),d("div",{class:y(["td",t===e.modelData.cell?"active":"inactive"]),key:s,onClick:e=>ce(t,3*i+s,l,a)},[p(k,{name:"fade-transition"},{default:u((()=>[r("div",null,[r("div",{class:"help-icon",style:v(`background: url(${e.iconB64List[t.icon]}) 0 0 no-repeat`)},null,4),r("div",S,h(t.title),1),r("div",V,h(t.desc),1)])])),_:2},1024)],10,P)))),128))])))),128))])):L("",!0)])))),128)),r("div",F,[H,r("span",W,h(e.versions.yunzai),1),q,r("span",N,h(e.versions.miao),1)])],4),p(m(B),{visible:ae.value,"onUpdate:visible":a[2]||(a[2]=e=>ae.value=e),title:"编辑标题",closable:!1,footer:null},{default:u((()=>[r("div",Y,[r("div",G,[J,r("div",K,[p(s,{value:e.helpCfg.title,"onUpdate:value":a[0]||(a[0]=l=>e.helpCfg.title=l),placeholder:"主标题"},null,8,["value"])])]),r("div",Q,[X,r("div",Z,[p(s,{value:e.helpCfg.subTitle,"onUpdate:value":a[1]||(a[1]=l=>e.helpCfg.subTitle=l),placeholder:"附标题"},null,8,["value"])])])])])),_:1},8,["visible"]),p(I,{helpList:e.helpList,"onUpdate:helpList":a[3]||(a[3]=e=>C(helpList)?helpList.value=e:null),modelData:e.modelData,"onUpdate:modelData":a[4]||(a[4]=e=>C(modelData)?modelData.value=e:null),iconB64List:e.iconB64List,"onUpdate:iconB64List":a[5]||(a[5]=e=>C(iconB64List)?iconB64List.value=e:null)},null,8,["helpList","modelData","iconB64List"]),p(M,{onRegister:m(w)},null,8,["onRegister"])],4)}}}),[["__scopeId","data-v-736b29d8"]]);export{ee as default};
