import{a as e,b as l,eV as a,du as t,r as i,v as s,e as n,o,f as c,z as d,k as r,j as p,c4 as u,x as m,bJ as v,m as g,F as h,h as b,bN as f,bc as y,bO as k,M as L,e3 as B,l as j,cV as C,cW as x,bP as D}from"./index.js";import $ from"./EditBodyModal2.js";import{a as I}from"./miao.api.js";import{b as M}from"./index3.js";import U from"./UploadIconHelpModal2.js";import"./index5.js";import"./SelectIconModal2.js";import"./IconUploader2.js";import"./esm.js";import"./base64Conver.js";import"./useWindowSizeFn.js";import"./FullscreenOutlined.js";import"./21ae6624.js";const _=e=>(C("data-v-3b5a0a0d"),e=e(),x(),e),w={class:"change-background"},O=_((()=>d("input",{type:"file",id:"upload-bg",style:{display:"none"},name:"icon",accept:"image/bmp,image/jpeg,image/png"},null,-1))),z=_((()=>d("input",{type:"file",id:"upload-icon",style:{display:"none"},name:"icon",accept:"image/png"},null,-1))),P={class:"title"},F={class:"label"},R=["onClick"],S={key:0,class:"help-table"},T=["onClick"],V={class:"help-title"},W={class:"help-desc"},E={class:"copyright"},A=j(" Created By Yunzai-Bot "),H={class:"version"},N=j(" & Miao-Plugin "),J={class:"version"},Y={class:"p-4"},q={class:"row"},G=_((()=>d("div",null,"主标题",-1))),K={class:"flex-1"},Q={class:"row"},X=_((()=>d("div",null,"副标题",-1))),Z={class:"flex-1"};var ee=e(l({__name:"HelpPanel",props:{helpCfg:Object,helpList:Object,bgB64:String,mainB64:String,cacheVer:Number,iconB64List:Array,modelData:Object,versions:Object},emits:["update:modelData","update:mainB64","update:iconB64List"],setup(e,{emit:l}){const j=e,C=a(),x=t(),[_,ee]=M(),{createMessage:le}=D(),ae=i(!1),te=i([{event:"changeBackground",text:"更换背景",icon:"akar-icons:image",onClick(){ne("upload-bg",(e=>{l("update:mainB64",e)}))}},{event:"uploadIcon",text:"上传图标",icon:"fontisto:nav-icon-grid",onClick(){let e=()=>{ne("upload-icon",(e=>{return a=this,t=null,i=function*(){let a=yield I(e);l("update:iconB64List",a),le.success("上传成功")},new Promise(((e,l)=>{var s=e=>{try{o(i.next(e))}catch(a){l(a)}},n=e=>{try{o(i.throw(e))}catch(a){l(a)}},o=l=>l.done?e(l.value):Promise.resolve(l.value).then(s,n);o((i=i.apply(a,t)).next())}));var a,t,i}))};!0===C.get("hide-upload-icon-help-modal",!1)?e():ee.openModal(!0,e)}}]),ie={},se=s((()=>{let e={},l=`/api/plugin/miao/help/theme/$s?token=${x.liteToken}&_v=${j.cacheVer}`,a=l.replace("$s","bg"),t=l.replace("$s","main");return j.mainB64&&(t=j.mainB64),e.background=`url(${t}) top left/100% auto no-repeat,url(${a})`,e}));function ne(e,l){let a=document.getElementById(e);ie[e]||(ie[e]=!0,a.addEventListener("change",(e=>{let t=e.target.files;if(0!==t.length){let e=t[0],i=new FileReader;i.readAsDataURL(e),i.onload=()=>{l(i.result),a.value=null}}}))),a.click()}const oe=()=>{ae.value=!0},ce=(e,a,t,i)=>{l("update:modelData",{show:!0,cell:e,cellIndex:a,group:t,groupIndex:i})},de=e=>{let l=[];for(let a=0;a<e.length;a+=3)l.push(e.slice(a,a+3));return l},re=s((()=>document.body.clientWidth>850?1:document.body.clientWidth/850));return(l,a)=>{const t=n("Icon"),i=n("a-button"),s=n("a-input");return o(),c("div",{style:u(`transform: scale(${m(re)});transform-origin: center top;`)},[d("div",{class:"wrap",style:u(m(se))},[d("div",w,[O,z,r(m(v),{trigger:["click"],dropMenuList:te.value},{default:p((()=>[r(i,{style:u(`transform: scale(${1/m(re)});transform-origin: right top;`),type:"primary",shape:"circle",size:"large"},{default:p((()=>[r(t,{icon:"akar-icons:image"})])),_:1},8,["style"])])),_:1},8,["dropMenuList"])]),d("div",{class:"head-box",onClick:oe},[d("div",P,g(e.helpCfg.title),1),d("div",F,g(e.helpCfg.subTitle),1)]),(o(!0),c(h,null,b(e.helpList,((l,a)=>(o(),c("div",{class:"cont-box",key:a},[d("div",{class:"help-group",onClick:e=>ce(null,null,l,a)},g(l.group),9,R),l.list&&l.list.length>0?(o(),c("div",S,[(o(!0),c(h,null,b(de(l.list),((t,i)=>(o(),c("div",{class:"tr",key:i},[(o(!0),c(h,null,b(t,((t,s)=>(o(),c("div",{class:f(["td",t===e.modelData.cell?"active":"inactive"]),key:s,onClick:e=>ce(t,3*i+s,l,a)},[r(y,{name:"fade-transition"},{default:p((()=>[d("div",null,[d("div",{class:"help-icon",style:u(`background: url(${e.iconB64List[t.icon]}) 0 0 no-repeat`)},null,4),d("div",V,g(t.title),1),d("div",W,g(t.desc),1)])])),_:2},1024)],10,T)))),128))])))),128))])):k("",!0)])))),128)),d("div",E,[A,d("span",H,g(e.versions.yunzai),1),N,d("span",J,g(e.versions.miao),1)])],4),r(m(L),{visible:ae.value,"onUpdate:visible":a[2]||(a[2]=e=>ae.value=e),title:"编辑标题",closable:!1,footer:null},{default:p((()=>[d("div",Y,[d("div",q,[G,d("div",K,[r(s,{value:e.helpCfg.title,"onUpdate:value":a[0]||(a[0]=l=>e.helpCfg.title=l),placeholder:"主标题"},null,8,["value"])])]),d("div",Q,[X,d("div",Z,[r(s,{value:e.helpCfg.subTitle,"onUpdate:value":a[1]||(a[1]=l=>e.helpCfg.subTitle=l),placeholder:"附标题"},null,8,["value"])])])])])),_:1},8,["visible"]),r($,{helpList:e.helpList,"onUpdate:helpList":a[3]||(a[3]=e=>B(helpList)?helpList.value=e:null),modelData:e.modelData,"onUpdate:modelData":a[4]||(a[4]=e=>B(modelData)?modelData.value=e:null),iconB64List:e.iconB64List,"onUpdate:iconB64List":a[5]||(a[5]=e=>B(iconB64List)?iconB64List.value=e:null)},null,8,["helpList","modelData","iconB64List"]),r(U,{onRegister:m(_)},null,8,["onRegister"])],4)}}}),[["__scopeId","data-v-3b5a0a0d"]]);export{ee as default};
