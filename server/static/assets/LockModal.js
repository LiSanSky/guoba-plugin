import{a as e,b as a,V as s,dC as r,U as o,ao as t,R as l,W as n,dD as i,e as c,o as d,i as u,k as p,D as m,x as f,q as h,l as v,m as g,y as k,a8 as x}from"./index.js";import{u as y}from"./lock.js";import{h as _}from"./header.js";const C=a({name:"LockModal",components:{BasicModal:s,BasicForm:r},setup(){const{t:e}=x(),{prefixCls:a}=o("header-lock-modal"),s=t(),r=y(),c=l((()=>{var e;return null==(e=s.getUserInfo)?void 0:e.realName})),[d,{closeModal:u}]=n(),[p,{validateFields:m,resetFields:f}]=i({showActionButtonGroup:!1,schemas:[{field:"password",label:e("layout.header.lockScreenPassword"),colProps:{span:24},component:"InputPassword",required:!0}]});return{t:e,prefixCls:a,getRealName:c,register:d,registerForm:p,handleLock:function(){return e=this,a=null,s=function*(){const e=(yield m()).password;u(),r.setLockInfo({isLock:!0,pwd:e}),yield f()},new Promise(((r,o)=>{var t=e=>{try{n(s.next(e))}catch(a){o(a)}},l=e=>{try{n(s.throw(e))}catch(a){o(a)}},n=e=>e.done?r(e.value):Promise.resolve(e.value).then(t,l);n((s=s.apply(e,a)).next())}));var e,a,s},avatar:l((()=>{const{avatar:e}=s.getUserInfo;return e||_}))}}}),w=["src"];var R=e(C,[["render",function(e,a,s,r,o,t){const l=c("BasicForm"),n=c("a-button"),i=c("BasicModal");return d(),u(i,k({footer:null,title:e.t("layout.header.lockScreen")},e.$attrs,{class:e.prefixCls,onRegister:e.register}),{default:p((()=>[m("div",{class:f(`${e.prefixCls}__entry`)},[m("div",{class:f(`${e.prefixCls}__header`)},[m("img",{src:e.avatar,class:f(`${e.prefixCls}__header-img`)},null,10,w),m("p",{class:f(`${e.prefixCls}__header-name`)},h(e.getRealName),3)],2),v(l,{onRegister:e.registerForm},null,8,["onRegister"]),m("div",{class:f(`${e.prefixCls}__footer`)},[v(n,{type:"primary",block:"",class:"mt-2",onClick:e.handleLock},{default:p((()=>[g(h(e.t("layout.header.lockScreenBtn")),1)])),_:1},8,["onClick"])],2)],2)])),_:1},16,["title","class","onRegister"])}]]);export{R as default};
