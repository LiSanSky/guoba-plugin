var e=Object.defineProperty,n=Object.defineProperties,t=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,r=(n,t,o)=>t in n?e(n,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):n[t]=o,i=(e,n)=>{for(var t in n||(n={}))a.call(n,t)&&r(e,t,n[t]);if(o)for(var t of o(n))l.call(n,t)&&r(e,t,n[t]);return e},u=(e,n,t)=>new Promise(((o,a)=>{var l=e=>{try{i(t.next(e))}catch(n){a(n)}},r=e=>{try{i(t.throw(e))}catch(n){a(n)}},i=e=>e.done?o(e.value):Promise.resolve(e.value).then(l,r);i((t=t.apply(e,n)).next())}));import{B as s}from"./BasicForm.js";import{u as p}from"./useForm.js";import{b as c,M as d,S as m,I as f,r as v,v as y,x as g,y as b,q as h,a as P,e as w,o as x,i as O,j,k as I,z as C,A as F,B as S}from"./index.js";const B=c({name:"Prompt",components:{Modal:d,Spin:m,Input:f,BasicForm:s},emits:["register"],setup(e,{emit:o}){const a=v(),l=v(!1),r=v(!1),s=v({}),c=y((()=>{var e;return null!=(e=s.value.placeholder)?e:"请输入内容"})),[d,{clearValidate:m,setFieldsValue:f,validate:P,updateSchema:w}]=p({compact:!0,wrapperCol:{span:24},schemas:[{label:"",field:"input",component:"Input",slot:"customInput"}],showActionButtonGroup:!1}),x=y((()=>{var o,a,u,p;let c=s.value,d={width:null!=(o=c.width)?o:500,title:null!=(a=c.title)?a:"prompt",visible:g(l),confirmLoading:g(r),wrapClassName:"guoba-prompt-modal"};var m,f;return m=i(i(i({},d),e),c),f={okText:null!=(u=c.okText)?u:"确定",cancelText:null!=(p=c.cancelText)?p:"取消",onOk:I,onCancel(){"function"==typeof s.value.onCancel&&s.value.onCancel(),j()}},n(m,t(f))}));function O(e){return u(this,null,(function*(){var n,t;document.body.focus(),s.value=e,l.value=!0,yield h(),yield w({field:"input",required:s.value.required,rules:s.value.rules,dynamicRules:s.value.dynamicRules}),yield f({input:null!=(n=s.value.defaultValue)?n:""}),yield m(),null==(t=a.value)||t.focus()}))}function j(){l.value=!1}function I(){return u(this,null,(function*(){try{const{onOk:e}=s.value;let n=yield P();if(C(!0),"function"==typeof e){!1!==(yield e(n.input))&&j()}else j()}finally{C(!1)}}))}function C(e){r.value=e}return b((()=>{o("register",{openModal:O,setLoading:C,getVisible:l})})),{inputRef:a,getProps:x,loading:r,options:s,placeholder:c,onChange:function(){P()},onSubmit:I,registerForm:d}}}),M={style:{padding:"20px"}},R=["innerHTML"];var T=P(B,[["render",function(e,n,t,o,a,l){const r=w("Input"),i=w("BasicForm"),u=w("Spin"),s=w("Modal");return x(),O(s,F(S(e.getProps)),{default:j((()=>[I(u,{spinning:e.loading},{default:j((()=>[C("div",M,[C("div",{innerHTML:e.options.content,style:{"margin-bottom":"8px"}},null,8,R),I(i,{onRegister:e.registerForm},{customInput:j((({model:n,field:t})=>[I(r,{ref:"inputRef",value:n[t],"onUpdate:value":e=>n[t]=e,placeholder:e.placeholder,onPressEnter:e.onSubmit,onInput:e.onChange},null,8,["value","onUpdate:value","placeholder","onPressEnter","onInput"])])),_:1},8,["onRegister"])])])),_:1},8,["spinning"])])),_:1},16)}]]);export{T as P};
