var e=(e,t,r)=>new Promise(((o,s)=>{var m=e=>{try{a(r.next(e))}catch(t){s(t)}},i=e=>{try{a(r.throw(e))}catch(t){s(t)}},a=e=>e.done?o(e.value):Promise.resolve(e.value).then(m,i);a((r=r.apply(e,t)).next())}));import{b as t,r,e as o,o as s,f as m,k as i,x as a,j as n,bO as l,l as u,w as d,bP as p}from"./index.js";import{B as c}from"./BasicForm.js";import{u as h}from"./useForm.js";import{u as j}from"./miao.data.js";import{j as f}from"./miao.api.js";import{l as b}from"./lodash.default.js";import"./index2.js";import"./find.js";import"./_baseIteratee.js";import"./get.js";import"./index4.js";import"./index5.js";import"./useFormItem.js";import"./transButton.js";import"./index3.js";import"./useWindowSizeFn.js";import"./FullscreenOutlined.js";import"./upperFirst.js";import"./download.js";import"./index6.js";import"./index7.js";import"./uniqBy.js";import"./base64Conver.js";import"./throttle.js";import"./merge.js";const g={key:0,style:{"text-align":"center"}},y=u("保存皮肤配置"),T=t({__name:"ThemeConfigForm",props:{model:Object,themeName:String,themeNames:Array,debugThemeName:String},emits:["update:model","update:debugThemeName"],setup(t,{emit:u}){const T=t,{createMessage:v}=p(),x=e=>e.debugTheme&&e.currentTheme,[w,{setFieldsValue:F,updateSchema:N,validate:C}]=h({schemas:[{field:"debugTheme",label:"调试皮肤",component:"Switch",bottomHelpMessage:"对已有皮肤进行实时调试（需要手动保存）"},{field:"currentTheme",label:"选择皮肤",component:"Select",show:({model:e})=>e.debugTheme,bottomHelpMessage:"若要新增或删除皮肤，请点击右上角的“皮肤”按钮。"},...j({show:({model:e})=>x(e)})],labelWidth:120,labelAlign:"right",labelCol:{xs:24,sm:5},wrapperCol:{xs:24,sm:19},showActionButtonGroup:!1,baseColProps:{span:24}}),S=r(!1);function A(t,r){return e(this,null,(function*(){w(t),yield function(){return e(this,null,(function*(){d((()=>T.themeNames),(t=>e(this,null,(function*(){Array.isArray(t)||(t=[]);let e=(t=t.filter((e=>"default"!==e))).map((e=>({label:e,value:e})));0===e.length&&(yield F({currentTheme:null})),yield N([{field:"currentTheme",componentProps:{options:e}}])}))),{deep:!0,immediate:!0})}))}(),yield function(t){return e(this,null,(function*(){yield F(T.model),d((()=>T.model),(()=>F(T.model)),{deep:!0}),d(t,(e=>{u("update:model",e),S.value=x(e);let t=S.value&&e.currentTheme||"";u("update:debugThemeName",t)}),{immediate:!0}),d((()=>t.debugTheme),((e,r)=>{!0!==e||r||(t.currentTheme=T.themeName||"")}),{immediate:!0})}))}(r)}))}function B(){return e(this,null,(function*(){let e=yield C(),t=b.omit(e,["debugTheme","currentTheme"]);yield f(e.currentTheme,t),v.success("保存成功~")}))}return(e,t)=>{const r=o("a-button");return s(),m("div",null,[i(a(c),{onRegister:A}),S.value?(s(),m("div",g,[i(r,{type:"primary",preIcon:"ant-design:save",onClick:B},{default:n((()=>[y])),_:1})])):l("",!0)])}}});export{T as default};
