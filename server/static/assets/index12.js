import{ap as r,b as e,r as o,a8 as t,cx as s,E as a,w as i,n,ag as l,e as u,o as m,f as c,F as p,h as d,a0 as f,a3 as y,l as g,H as j,k as b,m as v,q as x,i as h,cy as w,z as k}from"./index.js";import L from"./DetailModal.js";import{B as C}from"./TableImg.js";import{u as E}from"./useTable.js";import{getColumns as R}from"./data2.js";import"./index7.js";import"./index6.js";import"./index8.js";import"./onMountedOrActivated.js";import"./useContentViewHeight.js";import"./ArrowLeftOutlined.js";import"./merge.js";import"./sortable.esm.js";import"./RedoOutlined.js";import"./scrollTo.js";import"./index13.js";import"./index14.js";const T={class:"p-4"},A=["src"],D=e({setup(e){const D=o(),_=o([]),{t:I}=t(),M=s(),[O,{setTableData:H}]=E({title:I("sys.errorLog.tableTitle"),columns:R(),actionColumn:{width:80,title:"Action",dataIndex:"action"}}),[P,{openModal:V}]=a();function q(r){D.value=r,V(!0)}function z(){throw new Error("fire vue error!")}function B(){_.value.push(`${(new Date).getTime()}.png`)}function F(){return e=this,o=null,t=function*(){yield r.get({url:"/error"})},new Promise(((r,s)=>{var a=r=>{try{n(t.next(r))}catch(e){s(e)}},i=r=>{try{n(t.throw(r))}catch(e){s(e)}},n=e=>e.done?r(e.value):Promise.resolve(e.value).then(a,i);n((t=t.apply(e,o)).next())}));var e,o,t}return i((()=>M.getErrorLogInfoList),(r=>{n((()=>{H(l(r))}))}),{immediate:!0}),(r,e)=>{const o=u("a-button");return m(),c("div",T,[(m(!0),c(p,null,d(_.value,(r=>f((m(),c("img",{key:r,src:r,alt:""},null,8,A)),[[y,!1]]))),128)),g(L,{info:D.value,onRegister:j(P)},null,8,["info","onRegister"]),g(j(C),{onRegister:j(O),class:"error-handle-table"},{toolbar:b((()=>[g(o,{onClick:z,type:"primary"},{default:b((()=>[v(x(j(I)("sys.errorLog.fireVueError")),1)])),_:1}),g(o,{onClick:B,type:"primary"},{default:b((()=>[v(x(j(I)("sys.errorLog.fireResourceError")),1)])),_:1}),g(o,{onClick:F,type:"primary"},{default:b((()=>[v(x(j(I)("sys.errorLog.fireAjaxError")),1)])),_:1})])),bodyCell:b((({column:r,record:e})=>["action"===r.key?(m(),h(j(w),{key:0,actions:[{label:j(I)("sys.errorLog.tableActionDesc"),onClick:q.bind(null,e)}]},null,8,["actions"])):k("",!0)])),_:1},8,["onRegister"])])}}});export{D as default};
