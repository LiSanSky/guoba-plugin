var e=(e,a,o)=>new Promise(((l,n)=>{var i=e=>{try{s(o.next(e))}catch(a){n(a)}},t=e=>{try{s(o.throw(e))}catch(a){n(a)}},s=e=>e.done?l(e.value):Promise.resolve(e.value).then(i,t);s((o=o.apply(e,a)).next())}));import{a,b as o,U as l,r as n,c as i,e as t,o as s,i as r,k as p,l as c,D as u,z as d,bp as m,x as g,e9 as f}from"./index.js";import{P as v}from"./index6.js";import h from"./MiaoHeader2.js";import B from"./HelpPanel2.js";import{B as x,s as y,g as j,a as D}from"./BackupDrawer2.js";import{u as k}from"./index23.js";import"./index8.js";import"./onMountedOrActivated.js";import"./useContentViewHeight.js";import"./ArrowLeftOutlined.js";import"./EditBodyModal2.js";import"./SelectIconModal2.js";import"./IconUploader2.js";import"./esm.js";import"./miao.api.js";import"./base64Conver.js";import"./UploadIconHelpModal2.js";import"./21ae6624.js";import"./index3.js";const L=o({name:"MiaoPluginExtra",components:{HelpPanel:B,EditMiaoHeader:h,PageWrapper:v,BackupDrawer:x},setup(){const{prefixCls:a}=l("edit-miao-help"),{createMessage:o,createConfirm:t}=f(),s=n(!0),r=n(!0),p=n(0),c=n(null),u=n(null),d=n(null),m=n(null),g=n(null),v=i({miao:"x.x.x",yunzai:"x.x.x"}),h=n({show:!1,cell:null,cellIndex:null,group:null,groupIndex:null}),[B,{openDrawer:x}]=k(),L=()=>e(this,null,(function*(){try{r.value=!0;let e=yield j();c.value=e.helpCfg,u.value=e.helpList,v.miao=e.miaoVersion,v.yunzai=e.yunzaiVersion,d.value=null,m.value=null,g.value=yield D()}finally{r.value=!1,s.value=!1,p.value++}}));return L(),{prefixCls:a,loading:r,pageLoading:s,helpCfg:c,helpList:u,bgB64:d,mainB64:m,iconB64List:g,cacheVer:p,versions:v,modelData:h,onBackup:function(){x(!0,{})},onRollback:function(){t({title:"提示",iconType:"warning",content:"确定要放弃所有修改吗？",onOk:()=>{L()}})},loadData:L,saveData:()=>e(this,null,(function*(){try{r.value=!0,yield y(c,u,g,m),yield L(),o.success("保存成功~")}finally{r.value=!1}})),registerDrawer:B}}}),C={class:"flex justify-center md:pt-4 my-4"};var b=a(L,[["render",function(e,a,o,l,n,i){const f=t("EditMiaoHeader"),v=t("HelpPanel"),h=t("BackupDrawer"),B=t("PageWrapper");return s(),r(B,{class:g([e.prefixCls]),title:"编辑喵喵帮助",dense:"",sticky:"",stickyTop:"-14px",loading:e.loading},{headerContent:p((()=>[c(f,{onSave:e.saveData,onRollback:e.onRollback,onBackup:e.onBackup},null,8,["onSave","onRollback","onBackup"])])),default:p((()=>[u("div",C,[c(m,{name:"scroll-y-reverse-transition"},{default:p((()=>[e.pageLoading?d("",!0):(s(),r(v,{key:0,cacheVer:e.cacheVer,versions:e.versions,helpCfg:e.helpCfg,"onUpdate:helpCfg":a[0]||(a[0]=a=>e.helpCfg=a),helpList:e.helpList,"onUpdate:helpList":a[1]||(a[1]=a=>e.helpList=a),bgB64:e.bgB64,"onUpdate:bgB64":a[2]||(a[2]=a=>e.bgB64=a),mainB64:e.mainB64,"onUpdate:mainB64":a[3]||(a[3]=a=>e.mainB64=a),iconB64List:e.iconB64List,"onUpdate:iconB64List":a[4]||(a[4]=a=>e.iconB64List=a),modelData:e.modelData,"onUpdate:modelData":a[5]||(a[5]=a=>e.modelData=a)},null,8,["cacheVer","versions","helpCfg","helpList","bgB64","mainB64","iconB64List","modelData"]))])),_:1})]),c(h,{onRegister:e.registerDrawer,onReload:e.loadData},null,8,["onRegister","onReload"])])),_:1},8,["class","loading"])}]]);export{b as default};
