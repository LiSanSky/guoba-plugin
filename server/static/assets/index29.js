var e=(e,a,o)=>new Promise(((t,i)=>{var n=e=>{try{s(o.next(e))}catch(a){i(a)}},l=e=>{try{s(o.throw(e))}catch(a){i(a)}},s=e=>e.done?t(e.value):Promise.resolve(e.value).then(n,l);s((o=o.apply(e,a)).next())}));import{a,b as o,bQ as t,r as i,e as n,o as l,i as s,j as r,k as p,z as d,bU as m,bg as u,bT as c,bV as g}from"./index.js";import{P as j}from"./index13.js";import f from"./MiaoHeader.js";import B from"./HelpPanel.js";import{B as h,s as v,g as x,a as y,b,c as k}from"./BackupDrawer.js";import{u as D}from"./index30.js";import"./index15.js";import"./onMountedOrActivated.js";import"./useWindowSizeFn.js";import"./useContentViewHeight.js";import"./ArrowLeftOutlined.js";import"./transButton.js";import"./EditBodyModal.js";import"./index6.js";import"./SelectIconModal.js";import"./IconUploader.js";import"./usePrompt.js";import"./Prompt.js";import"./BasicForm.js";import"./index2.js";import"./_baseIteratee.js";import"./get.js";import"./index4.js";import"./index5.js";import"./useFormItem.js";import"./index3.js";import"./FullscreenOutlined.js";import"./download.js";import"./index7.js";import"./index8.js";import"./uniqBy.js";import"./useForm.js";import"./index10.js";const L=o({name:"MiaoPluginExtra",components:{HelpPanel:B,EditMiaoHeader:f,PageWrapper:j,BackupDrawer:h},setup(){const{prefixCls:a}=t("edit-miao-help"),{createMessage:o,createConfirm:n}=g(),l=i(!0),s=i(!0),r=i(null),p=i(null),d=i(null),m=i(null),u=i(null),c=i({show:!1,cell:null,cellIndex:null,group:null,groupIndex:null}),[j,{openDrawer:f}]=D(),B=()=>e(this,null,(function*(){try{s.value=!0;let e=yield x();r.value=e.helpCfg,p.value=e.helpList,d.value=yield y(),m.value=yield b(),u.value=yield k()}finally{s.value=!1,l.value=!1}}));return B(),{prefixCls:a,loading:s,pageLoading:l,helpCfg:r,helpList:p,bgB64:d,mainB64:m,iconB64List:u,modelData:c,onBackup:function(){f(!0,{})},onRollback:function(){n({title:"提示",iconType:"warning",content:"确定要放弃所有修改吗？",onOk:()=>{B()}})},loadData:B,saveData:()=>e(this,null,(function*(){try{s.value=!0,yield v(r,p,u,m),o.success("保存成功~")}finally{s.value=!1}})),registerDrawer:j}}}),w={class:"flex justify-center md:pt-4 my-4"};var C=a(L,[["render",function(e,a,o,t,i,g){const j=n("EditMiaoHeader"),f=n("HelpPanel"),B=n("BackupDrawer"),h=n("PageWrapper");return l(),s(h,{class:c([e.prefixCls]),title:"编辑喵喵帮助",dense:"",sticky:"",stickyTop:"-14px",loading:e.loading},{headerContent:r((()=>[p(j,{onSave:e.saveData,onRollback:e.onRollback,onBackup:e.onBackup},null,8,["onSave","onRollback","onBackup"])])),default:r((()=>[d("div",w,[p(u,{name:"scroll-y-reverse-transition"},{default:r((()=>[e.pageLoading?m("",!0):(l(),s(f,{key:0,helpCfg:e.helpCfg,"onUpdate:helpCfg":a[0]||(a[0]=a=>e.helpCfg=a),helpList:e.helpList,"onUpdate:helpList":a[1]||(a[1]=a=>e.helpList=a),bgB64:e.bgB64,"onUpdate:bgB64":a[2]||(a[2]=a=>e.bgB64=a),mainB64:e.mainB64,"onUpdate:mainB64":a[3]||(a[3]=a=>e.mainB64=a),iconB64List:e.iconB64List,"onUpdate:iconB64List":a[4]||(a[4]=a=>e.iconB64List=a),modelData:e.modelData,"onUpdate:modelData":a[5]||(a[5]=a=>e.modelData=a)},null,8,["helpCfg","helpList","bgB64","mainB64","iconB64List","modelData"]))])),_:1})]),p(B,{onRegister:e.registerDrawer,onReload:e.loadData},null,8,["onRegister","onReload"])])),_:1},8,["class","loading"])}]]);export{C as default};
